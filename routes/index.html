<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Facebook moderation config -->
    <link rel="icon" href="/img/icones/blog_icon_15px.png" type="img/png" sizes="15x15">
    <!-- Titulo na aba da página -->
    <title>Nome do Blog</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/libs/bootstrap/4.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/css/output.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script type="text/javascript" src="/libs/jquery//3.2.1/jquery.js"></script>
</head>
<body>
    <div id="fb-root"></div>
    <script>
        $(document).ready(function() {
            $.ajaxSetup({cache:'true'});
            $.getScript('https://connect.facebook.net/pt_BR/sdk/debug.js',function(){
                FB.init({
                    appId:537100973372978,
                    autoLogAppEvents:true,
                    xfbml:true,
                    version:'v3.0'
                });
            });
        });
    </script>

    <header class="container-fluid barraNavTopo text-center mb-5 mt-5">
        <div class="grupoNavegacao mb-5">
            <div id="toggleNavegacao">
                <div class="traco1"></div>
                <div class="traco2"></div>
                <div class="traco3"></div>
            </div>
        </div>
        
        <img class="img-fluid d-inline" src="/img/icones/digital_640px.png" alt="Logo: digital do dedo">
        <a class="navbar-brand d-inline" href="/"><span class="transform90">NOME</span> DO BLOG</a>
        <hr class="mt-5">
    </header>


    <!-- Menu de navegação esquerdo -->
    <nav class="navbarLateral">
        <ul>
            <li><a href="#">Sobre o site</a></li>
            <li><a href="#">Autor</a></li>
        </ul>
    </nav>
    
    
    <main class="container">
        <div class="row justify-content-between no-gutter">
            <section class="postsDoBlog col-md-12">
            </section><!-- /postsDoBlog -->
        </div><!-- /row -->


    </main>
    <!-- jQuery, Popper.js, JavaScript -->
    <!--<script type="text/javascript" src="libs/jquery//3.2.1/jquery.js"></script>-->
    <script type="text/javascript" src="/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script type="text/javascript" src="/libs/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
    /* carrega proximo post
    var proxPost = 1;
    var posts = {
        1:{titulo:"Primeiro Post",url:"/primeiro-post",id:"post1"},
        2:{titulo:"Segundo Post",url:"/segundo-post",id:"post2"},
        3:{titulo:"Terceiro Post",url:"/terceiro-post",id:"post3"}
    };
    $(document).ready(function () {
         melhorar o carregamento de posts antigos!
        var reqPost = function () {
            if (proxPost > 0) {
                jQuery.get(
                    posts[proxPost].url,
                    function (data) {
                        try {
                            $('.postsDoBlog').append(data);
                            FB.XFBML.parse(document.getElementById(posts[proxPost].id));
                            proxPost--;
                        } catch (error) {
                            console.log(error);
                        }                    
                    },
                    'html'
                );
            }
        }
        window.addEventListener("scroll", () => {
            var elem = document.querySelector('html');
            if (elem.clientHeight + elem.scrollTop >= elem.scrollHeight) {
                reqPost();
            }
        });
    });*/
    </script>
    <script>
    /* animacao do toggler que abre e fecha a area de navegação */
    $(document).ready(function () {
        var toggleNavegacao = $('#toggleNavegacao');
        var navbarLateral = $('.navbarLateral');
        $('#toggleNavegacao').on('click', function () {
            $(this).toggleClass('abreFechaMenu');

            if ( -1 !== $(toggleNavegacao).prop('class').search('abreFechaMenu') ) {
                $(navbarLateral).css('width', 250);
            } else {
                $(navbarLateral).css('width', 0);
            }
        });
    });
    </script>
    <script>
    /* animação de abertura do menu lateral direito */
    var aside = $('aside');
    $(document).ready( function() {
        $('.toggleLadoDireito').on('click', function() {
            $(aside).toggleClass('navegacaoRapidaAberta');
        });
    });
    </script>
    <script>
    /* toggle comentarios */
    $(document).ready(function() {
        let parent = $('.postsDoBlog');
        parent.on('click','button',null,function() {
            $($(this).next()).toggleClass('fechado');
        });
    });
    </script>
    <script>
    /*
    Atualiza a hash da url dinamicamente.
    OBS: não é recomendado utilizar tal função junto
    com posts que tenham o id com o nome do post
    window.addEventListener("scroll", () => {
        var posts = document.getElementsByClassName('post');
        for(var i =0; i < posts.length; i++) {
            if( (posts[i].getBoundingClientRect().top < 300) && (posts[i].getBoundingClientRect().bottom > 300) ) {
                document.location.hash = posts[i].getAttribute('data-urlname');
            }
        }
    });
    */
    </script>
    <script>
    var getAndPost = (getUrl, container) => {
        $.ajaxSetup({async: true,cache: 'true'});
        $.get(getUrl, (post) => $(container).append(post));
    }
    $(document).ready( function () {
        if (window.location.pathname.length > 1) {
            getAndPost(window.location.href, '.postsDoBlog');
        }
        /* else {
            getAndPost(window.location.href, '.postsDoBlog');
        } */
    });
    </script>
</body>
</html>